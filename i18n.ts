
import React, { createContext, useState, useContext, ReactNode, useEffect } from 'react';

const translations = {
  ko: {
    title: 'ì´ë¯¸ì§€ íŽ¸ì§‘ AI',
    description: 'Gemini 3 Pro ê¸°ë°˜ ì „ë¬¸ê°€ìš© ì´ë¯¸ì§€ íŠ¸ëžœìŠ¤í¬ë¨¸',
    sourceImage: 'ì›ë³¸ ì†ŒìŠ¤',
    generatedImage: 'íŽ¸ì§‘ ê²°ê³¼ë¬¼',
    imageWillAppear: 'ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ìƒì„±í•˜ì„¸ìš”',
    generatingMasterpiece: 'AIê°€ ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ì¤‘ìž…ë‹ˆë‹¤...',
    removeBackground: 'ë°°ê²½ ì œê±°',
    revert: 'ì´ì „ ë‹¨ê³„ë¡œ',
    download: 'ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ',
    swapImages: 'ì´ë¯¸ì§€ êµì²´',
    compareMode: 'ë¹„êµ ëª¨ë“œ',
    history: 'íŽ¸ì§‘ ê¸°ë¡',
    viewImage: 'ì´ë¯¸ì§€ ë³´ê¸°',
    modelNote: 'AI í”¼ë“œë°±:',
    promptLabel: 'ëª…ë ¹ì–´ ìž…ë ¥',
    promptPlaceholder: 'ë¬´ì—‡ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?',
    recentPrompts: 'ìµœê·¼ ëª…ë ¹',
    chooseImage: 'ì´ë¯¸ì§€ ì„ íƒ',
    uploadFromComputer: 'ë‚´ ì»´í“¨í„°ì—ì„œ ì—…ë¡œë“œ',
    inputAssetsHeader: 'ì°¸ì¡° ë„êµ¬',
    addStyle: 'ìŠ¤íƒ€ì¼ ì°¸ì¡°',
    removeStyleImage: 'ìŠ¤íƒ€ì¼ ì œê±°',
    addAsset: 'ì—ì…‹ ì¶”ê°€',
    removeAssetImage: 'ì—ì…‹ ì œê±°',
    generate: 'ìƒì„±í•˜ê¸°',
    generating: 'ë³€í™˜ ì¤‘...',
    upscaling: '4K ì—…ìŠ¤ì¼€ì¼ë§ ì¤‘...',
    toggleLanguage: 'EN',
    apiKeyRequired: 'í‚¤ ì„¤ì •',
    apiKeyDisconnected: 'ì—°ê²° í•„ìš”',
    apiKeyConnected: 'ì—°ê²°ë¨',
    apiKeyDescription: 'Gemini API í‚¤ë¥¼ ìž…ë ¥í•˜ì—¬ ë‚˜ë§Œì˜ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”. í‚¤ëŠ” ë¸Œë¼ìš°ì €ì— ì•ˆì „í•˜ê²Œ ì €ìž¥ë©ë‹ˆë‹¤.',
    selectKey: 'AI Studioì—ì„œ í‚¤ ì„ íƒ',
    billingDocs: 'API í‚¤ ë°œê¸‰ë°›ê¸°',
    enterKeyPlaceholder: 'ì—¬ê¸°ì— Google Gemini API í‚¤ë¥¼ ìž…ë ¥í•˜ì„¸ìš” (AIza...)',
    saveKey: 'ì—°ê²° ë° ì•”í˜¸í™” ì €ìž¥',
    removeKey: 'í‚¤ ì‚­ì œ',
    keySaved: 'API í‚¤ê°€ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
    btn4K: '4K ì´ˆê³ í™”ì§ˆ',
    btn16_9: '16:9 ê°€ë¡œ',
    btn9_16: '9:16 ì„¸ë¡œ',
    btn1_1: '1:1 ì •ë°©í˜•',
    labelQuality: 'í™”ì§ˆ ì„¤ì •',
    labelRatio: 'í™”ë©´ ë¹„ìœ¨',
    labelCameraAngle: 'ì¹´ë©”ë¼ ì•µê¸€',
    angleFront: 'ì •ë©´',
    angleSide: 'ì¸¡ë©´',
    angleBack: 'í›„ë©´',
    angleSheet: '3ë©´ë„',
    changeKey: 'ì„¤ì •',
    zoom: 'í¬ê²Œ ë³´ê¸°',
    delete: 'ì‚­ì œ',
    close: 'ë‹«ê¸°',
    or: 'ë˜ëŠ”',
    readyToTransform: 'AIê°€ ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“¤ ê³µê°„ìž…ë‹ˆë‹¤ âœ¨',
    uploadInstruction: 'í´ë¦­, ë“œëž˜ê·¸ ë˜ëŠ” ë¶™ì—¬ë„£ê¸°(Ctrl+V)',
    supportedFormats: 'ì§€ì› í˜•ì‹: JPG, PNG, WEBP',
    originalBadge: 'ì›ë³¸',
    resultBadge: 'ê²°ê³¼ë¬¼',
    changeImage: 'ì´ë¯¸ì§€ ë³€ê²½',
    copied: 'ë³µì‚¬ë¨!',
    copyToClipboard: 'í´ë¦½ë³´ë“œì— ë³µì‚¬',
    darkMode: 'ë‹¤í¬ ëª¨ë“œ',
    lightMode: 'ë¼ì´íŠ¸ ëª¨ë“œ',
    brushTool: 'ë¶€ë¶„ íŽ¸ì§‘ (ë§ˆìŠ¤í‚¹)',
    clearMask: 'ë§ˆìŠ¤í¬ ì§€ìš°ê¸°',
    splitSave: '3ë¶„í•  ì €ìž¥',
    splitSaved: 'ì´ë¯¸ì§€ê°€ 3ê°œë¡œ ë¶„í•  ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
    labelStructureWeight: 'ì°¸ì¡° ê°•ë„',
    styleOnly: 'ìŠ¤íƒ€ì¼ë§Œ',
    structureKeep: 'í˜•íƒœ ìœ ì§€',
    serverBusy: 'ì„œë²„ê°€ ë¶ë¹„ê³  ìžˆìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
    labelCinematic: 'ì‹œë„¤ë§ˆí‹± ì—°ì¶œ',
    labelShotSize: 'ìƒ· í¬ê¸°',
    tooltipShotSize: 'ì¸ë¬¼ì´ í™”ë©´ì— ì–¼ë§ˆë‚˜ ë³´ì¼ì§€ ì„ íƒí•©ë‹ˆë‹¤ (í´ë¡œì¦ˆì—… ~ ì™€ì´ë“œ).',
    shotECU: 'ECU (100mm)',
    shotCloseUp: 'í´ë¡œì¦ˆì—… (85mm)',
    shotBust: 'ë°”ìŠ¤íŠ¸ (50mm)',
    shotFullBody: 'ì™€ì´ë“œ (24mm)',
    shotExtremeWide: 'ìµìŠ¤íŠ¸ë¦¼ ì™€ì´ë“œ',
    labelCameraHeight: 'ì¹´ë©”ë¼ ë†’ì´',
    tooltipCameraHeight: 'í”¼ì‚¬ì²´ë¥¼ ë°”ë¼ë³´ëŠ” ì¹´ë©”ë¼ì˜ ìˆ˜ì§ ê°ë„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.',
    angleLow: 'ë¡œìš° ì•µê¸€',
    angleEye: 'ì•„ì´ ë ˆë²¨',
    angleHigh: 'í•˜ì´ ì•µê¸€',
    labelMotion: 'ë™ìž‘ ë° ê°ì •',
    tooltipMotion: 'ìºë¦­í„°ì˜ êµ¬ì²´ì ì¸ ì›€ì§ìž„ê³¼ ìžì„¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.',
    motionStatic: 'ì •ì§€ (ê¸°ë³¸)',
    motionWalking: 'ê±·ê¸°',
    motionRunning: 'ë‹¬ë¦¬ê¸° (ì—­ë™ì )',
    motionSitting: 'ì•‰ê¸° (ì¼ìƒ)',
    motionLying: 'ëˆ•ê¸° (íœ´ì‹)',
    motionJumping: 'ì í”„ (ì•¡ì…˜)',
    motionCrying: 'ìŠ¬í”” (ê°ì •)',
    motionReaching: 'ì† ë»—ê¸°',
    motionCrouching: 'ì›…í¬ë¦¬ê¸°',
    motionLookingUp: 'ì˜¬ë ¤ë‹¤ë³´ê¸°',
    labelCameraMovement: 'ì¹´ë©”ë¼ ì›Œí¬',
    tooltipCameraMovement: 'ì¹´ë©”ë¼ì˜ ì›€ì§ìž„ ê¸°ë²•ì„ ì„ íƒí•©ë‹ˆë‹¤ (ì •ì  vs ë™ì ).',
    cameraStatic: 'ê³ ì • (Tripod)',
    cameraSmooth: 'ë¶€ë“œëŸ¬ìš´ ì´ë™ (Gimbal)',
    cameraDynamic: 'ë‹¤ì´ë‚´ë¯¹ (Handheld)',
    cameraTracking: 'íŠ¸ëž˜í‚¹ (Dolly)',
    labelTrendy: 'âœ¨ íŠ¸ë Œë”” ìŠ¤íƒ€ì¼',
    tooltipTrendy: 'ìœ í–‰í•˜ëŠ” ì‹œê°ì  í…Œë§ˆë‚˜ ë¶„ìœ„ê¸°ë¥¼ ì¦‰ì‹œ ì ìš©í•©ë‹ˆë‹¤.',
    trendyKpop: 'K-POP ì•„ì´ëŒ',
    trendyTiktok: 'í‹±í†¡ ì¸í”Œë£¨ì–¸ì„œ',
    trendyStreet: 'ìŠ¤íŠ¸ë¦¿ ìŠ¤ì›¨ê·¸',
    trendyDance: 'ë‹¤ì´ë‚´ë¯¹ ëŒ„ìŠ¤',
    randomCinematic: 'ëžœë¤ ì—°ì¶œ',
    sectionAssets: 'ì°¸ì¡° ì—ì…‹',
    sectionSettings: 'ì¶œë ¥ ì„¤ì •',
    sectionCamera: 'ì‹œë„¤ë§ˆí‹± ì—°ì¶œ',
    sectionCharacterView: 'ìºë¦­í„° ë·°í¬ì¸íŠ¸',
    sectionSpecial: 'âœ¨ AI íŠ¹ìˆ˜ ê¸°ëŠ¥',
    labelStyleSource: 'ìŠ¤íƒ€ì¼ ì†ŒìŠ¤',
    btnChar: 'ðŸ‘¤ ìºë¦­í„°',
    btnAsset: 'ðŸ“‚ ì—ì…‹',
    labelFormat: 'ìƒì„± í˜•íƒœ',
    btnStandard: 'ê¸°ë³¸',
    btnCube: '4ë°©í–¥',
    btnWide: 'íŒŒë…¸ë¼ë§ˆ',
    uploadAssetLabel: 'í´ë¦­í•˜ê±°ë‚˜ ë“œëž˜ê·¸í•˜ì—¬ ì°¸ì¡° ì´ë¯¸ì§€ ì—…ë¡œë“œ',
    reuse: 'ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ë° íŽ¸ì§‘',
    randomPrompts: [
        'ì‚¬ì´ë²„íŽ‘í¬ ìŠ¤íƒ€ì¼ì˜ ê³ ì–‘ì´', 
        'ë°˜ ê³ í ìŠ¤íƒ€ì¼ì˜ ë³„ì´ ë¹›ë‚˜ëŠ” ë°¤', 
        'ë¯¸ëž˜ ë„ì‹œì˜ ìŠ¤ì¹´ì´ë¼ì¸', 
        'ìˆ˜ì±„í™”ë¡œ ê·¸ë¦° ì•„ë¦„ë‹¤ìš´ ì •ì›', 
        'ìš°ì£¼ë¥¼ ì—¬í–‰í•˜ëŠ” ìš°ì£¼ë¹„í–‰ì‚¬'
    ],
    smartTags: [
      'ì‚¬ì´ë²„íŽ‘í¬', 'ì‹œë„¤ë§ˆí‹± ì¡°ëª…', 'ìŠ¤íŠœë””ì˜¤ ì§€ë¸Œë¦¬', '8K í•´ìƒë„', 'ê´‘ê° ë Œì¦ˆ', 'ë³´ì¼€ íš¨ê³¼', 'íŒŒìŠ¤í…” í†¤', 'ì–¸ë¦¬ì–¼ ì—”ì§„ 5'
    ],
    genError: 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
    randomPrompt: 'ëžœë¤ ëª…ë ¹ì–´',
    saved: 'ì´ë¯¸ì§€ê°€ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
    btnAIDirector: 'ðŸŽ¬ AI ê°ë… ëª¨ë“œ',
    subAIDirector: 'íŽ˜ë¥´ì†Œë‚˜ ë¶„ì„ ë° 5ì»· ìžë™ ìƒì„±',
    generatingScenes: 'ì”¬ ìƒì„± ì¤‘...',
    tooltipAIDirector: 'AI ê°ë… ëª¨ë“œëž€?\n\nìž…ë ¥í•˜ì‹  ì‹œë‚˜ë¦¬ì˜¤ë¥¼ AIê°€ ë¶„ì„í•˜ì—¬ ê°€ìž¥ ì ì ˆí•œ êµ¬ë„ì™€ ì—°ì¶œë¡œ 5ìž¥ì˜ ì—°ê²°ëœ ìž¥ë©´ì„ í•œ ë²ˆì— ìƒì„±í•´ ë“œë¦½ë‹ˆë‹¤.',
    settingsHeader: 'ì„¤ì •',
    labelApiKeyName: 'GOOGLE GEMINI API KEY',
    keyStoredLocally: 'API Key is stored locally and encrypted.',
    labelSystemState: 'ì‹œìŠ¤í…œ ìƒíƒœ'
  },
  en: {
    title: 'AI Image Editor',
    description: 'Professional Image Transformer powered by Gemini 3 Pro',
    sourceImage: 'Source Image',
    generatedImage: 'Transformed Result',
    imageWillAppear: 'Upload or generate an image',
    generatingMasterpiece: 'AI is bringing your imagination to life...',
    removeBackground: 'Remove BG',
    revert: 'Revert',
    download: 'Download Image',
    swapImages: 'Swap',
    compareMode: 'Compare',
    history: 'History',
    viewImage: 'View',
    modelNote: "AI Feedback:",
    promptLabel: 'AI Prompt',
    promptPlaceholder: 'What would you like to create?',
    recentPrompts: 'Recent',
    chooseImage: 'Upload',
    uploadFromComputer: 'From PC',
    inputAssetsHeader: 'Input Assets',
    addStyle: 'Style Ref',
    removeStyleImage: 'Remove Style',
    addAsset: 'Add Asset',
    removeAssetImage: 'Remove Asset',
    generate: 'GENERATE',
    generating: 'Processing...',
    upscaling: 'Upscaling to 4K...',
    toggleLanguage: 'KO',
    apiKeyRequired: 'Key Settings',
    apiKeyDisconnected: 'Required',
    apiKeyConnected: 'Connected',
    apiKeyDescription: 'Enter your Gemini API key to start creating. The key is stored safely in your browser.',
    selectKey: 'Select via AI Studio',
    billingDocs: 'Get API Key',
    enterKeyPlaceholder: 'Enter your Google Gemini API Key (AIza...)',
    saveKey: 'Connect & Encrypt Save',
    removeKey: 'Delete Key',
    keySaved: 'API Key saved.',
    btn4K: '4K Ultra HD',
    btn16_9: '16:9 Wide',
    btn9_16: '9:16 Portrait',
    btn1_1: '1:1 Square',
    labelQuality: 'QUALITY',
    labelRatio: 'RATIO',
    labelCameraAngle: 'Camera Angle',
    angleFront: 'Front',
    angleSide: 'Side',
    angleBack: 'Back',
    angleSheet: 'Sheet',
    changeKey: 'Settings',
    zoom: 'Full Preview',
    delete: 'Delete',
    close: 'Close',
    or: 'OR',
    readyToTransform: 'Where AI turns imagination into reality âœ¨',
    uploadInstruction: 'Click, Drag or Paste (Ctrl+V)',
    supportedFormats: 'Supports: JPG, PNG, WEBP',
    originalBadge: 'Original',
    resultBadge: 'Result',
    changeImage: 'Change Image',
    copied: 'Copied!',
    copyToClipboard: 'Copy to Clipboard',
    darkMode: 'Dark Mode',
    lightMode: 'Light Mode',
    brushTool: 'In-painting Mask',
    clearMask: 'Clear Mask',
    splitSave: 'Split & Save',
    splitSaved: 'Image split and saved successfully.',
    labelStructureWeight: 'Reference Weight',
    styleOnly: 'Style Only',
    structureKeep: 'Structure Keep',
    serverBusy: 'Server is busy. Please try again in a moment.',
    labelCinematic: 'Cinematic Controls',
    labelShotSize: 'Shot Size',
    tooltipShotSize: 'Choose how much of the character is visible (Close-up to Wide).',
    shotECU: 'ECU (100mm)',
    shotCloseUp: 'Close-up (85mm)',
    shotBust: 'Medium (50mm)',
    shotFullBody: 'Wide (24mm)',
    shotExtremeWide: 'Extreme Wide',
    labelCameraHeight: 'Camera Height',
    tooltipCameraHeight: 'Set the vertical angle of the camera relative to the subject.',
    angleLow: 'Low Angle',
    angleEye: 'Eye Level',
    angleHigh: 'High Angle',
    labelMotion: 'Motion & Emotion',
    tooltipMotion: "Define the character's movement and physical posture.",
    motionStatic: 'Static (Default)',
    motionWalking: 'Walking',
    motionRunning: 'Running (Dynamic)',
    motionSitting: 'Sitting (Daily)',
    motionLying: 'Lying Down (Relax)',
    motionJumping: 'Jumping (Action)',
    motionCrying: 'Crying (Emotion)',
    motionReaching: 'Reaching',
    motionCrouching: 'Crouching',
    motionLookingUp: 'Looking Up',
    labelCameraMovement: 'Camera Movement',
    tooltipCameraMovement: 'Choose the camera movement technique (Static vs Dynamic).',
    cameraStatic: 'Static (Tripod)',
    cameraSmooth: 'Smooth (Gimbal)',
    cameraDynamic: 'Dynamic (Handheld)',
    cameraTracking: 'Tracking (Dolly)',
    labelTrendy: 'âœ¨ Trendy Styles',
    tooltipTrendy: 'Apply popular visual themes or vibes instantly.',
    trendyKpop: 'K-POP Idol',
    trendyTiktok: 'TikTok Influencer',
    trendyStreet: 'Street Swag',
    trendyDance: 'Dynamic Dance',
    randomCinematic: 'Random Direction',
    sectionAssets: 'Reference Assets',
    sectionSettings: 'Output Settings',
    sectionCamera: 'Cinematic Direction',
    sectionCharacterView: 'Character Viewpoint',
    sectionSpecial: 'âœ¨ AI Special Feature',
    labelStyleSource: 'Style Source',
    btnChar: 'ðŸ‘¤ Character',
    btnAsset: 'ðŸ“‚ Asset',
    labelFormat: 'Format',
    btnStandard: 'Standard',
    btnCube: '4-way',
    btnWide: 'Panorama',
    uploadAssetLabel: 'Click or drag to upload reference image',
    reuse: 'Load Settings & Edit',
    randomPrompts: [
        'Cyberpunk style cat', 
        'Starry night in Van Gogh style', 
        'Future city skyline', 
        'Beautiful garden in watercolor', 
        'Astronaut traveling through space'
    ],
    smartTags: [
      'Cyberpunk', 'Cinematic Lighting', 'Studio Ghibli', '8K Resolution', 'Wide Angle', 'Bokeh', 'Pastel', 'Unreal Engine 5'
    ],
    genError: 'Failed to generate image.',
    randomPrompt: 'Random Prompt',
    saved: 'Image saved successfully.',
    btnAIDirector: 'ðŸŽ¬ AI Director Mode',
    subAIDirector: 'Persona Analysis & 5-Cut Gen',
    generatingScenes: 'Generating Scenes...',
    tooltipAIDirector: 'What is AI Director Mode?\n\nThe AI analyzes your scenario and generates 5 connected scenes at once with the most appropriate composition and direction.',
    settingsHeader: 'Settings',
    labelApiKeyName: 'GOOGLE GEMINI API KEY',
    keyStoredLocally: 'API Key is stored locally and encrypted.',
    labelSystemState: 'System State'
  }
};

type Language = 'ko' | 'en';

interface LanguageContextType {
  language: Language;
  t: typeof translations['en'];
  toggleLanguage: () => void;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Fix: Implement and export LanguageProvider to resolve index.tsx error
export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('language');
      return (saved as Language) || 'en';
    }
    return 'en';
  });

  const toggleLanguage = () => {
    setLanguage((prev) => (prev === 'ko' ? 'en' : 'ko'));
  };

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const value = {
    language,
    t: translations[language],
    toggleLanguage,
  };

  return React.createElement(LanguageContext.Provider, { value }, children);
};

// Fix: Implement and export useI18n to resolve App.tsx and ImagePanel.tsx errors
export const useI18n = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useI18n must be used within a LanguageProvider');
  }
  return context;
};
